!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const i=document.querySelector(".gamefield");class r{constructor(e,t){this.number=e,this.picture=t,this.url=null,this.arr=null,this.value=null,this.current=null,this.count=0,this.point=e,this.size=null}choice(){switch(this.picture){case 1:this.url="one-skirt";break;case 2:this.url="two-skirt";break;case 3:this.url="three-skirt"}switch(this.arr=[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12],this.number){case 10:this.size="big";break;case 18:this.size="medium";break;case 24:this.size="small"}}build(){let e=this.number;for(;e>0;){let t=Math.round(Math.random()*(e-1));i.innerHTML+=`<div class="container ${this.size}">\n            <div class="card" num=${this.arr[t]}>\n              <div class="front ${this.url}"></div>\n              <div class="back"><img src="images/fish${this.arr[t]}.png"</div>\n            </div>\n          </div>`,this.arr.splice(t,1),e-=1}}handle(){i.addEventListener("click",e=>{let t=e.target;for(;t!==i;){if(t.classList.contains("card"))return 2!==this.count&&(t.classList.add("flipped"),this.count=this.count+1,1===this.count&&(this.current=t),t===this.current&&(this.count=1),void(2===this.count&&(this.current.getAttribute("num")===t.getAttribute("num")?setTimeout(()=>{this.current.classList.add("hideout"),t.classList.add("hideout"),this.point=this.point-2,this.count=0,0===this.point&&this.win()},500):setTimeout(()=>{this.current.classList.remove("flipped"),t.classList.remove("flipped"),this.count=0},1e3))));t=t.parentNode}})}cleanUp(){i.innerHTML=""}win(){i.classList.remove("wrapper"),i.innerHTML='<h2 class="win_title">You win!</h2>',clearInterval(interval);let e=[localStorage.name,minute+":"+second,60*minute+second,this.number];top10.push(e);let t=this.number,n=top10.filter(function(e){return e[3]==t});n.sort(function(e,t){return e[2]>t[2]?1:-1}),n=n.slice(0,10);let r=top10.filter(function(e){return e[3]!==t});top10=r.concat(n),localStorage.top10=JSON.stringify(top10),drawTop10(t)}init(){this.choice(),this.build(),this.handle()}}let s,l=0,c=0,o=document.querySelector(".timer"),a=0,u=0,d={},m=[];function h(){document.getElementById("game-window").classList.toggle("hide")}function p(){document.getElementById("welcome-part").classList.toggle("hide")}function f(e){let t=document.createElement("div");t.className="errorMessage";let n=document.createTextNode(e);t.appendChild(n),document.querySelector("div .rules").appendChild(t),setTimeout(function(){t.parentNode.removeChild(t)},1e3)}document.getElementById("startGameBtn").addEventListener("click",function(e){if(e.preventDefault(),!function(){if(""==document.getElementById("name").value)return f("empty name"),!1;if(localStorage.name=document.getElementById("name").value,""==document.getElementById("lastName").value)return f("empty last name"),!1;if(localStorage.lastName=document.getElementById("lastName").value,""==document.getElementById("email").value)return f("empty email"),!1;localStorage.email=document.getElementById("email").value;let e=0;return document.querySelectorAll(".radio").forEach(function(t){t.checked&&(e=1,u=t.value)}),0==e?(f("level not selected"),!1):(e=0,document.querySelectorAll(".radioShirt").forEach(function(t){t.checked&&(e=1,a=t.value)}),0!=e||(f("shirt not selected"),!1))}())return;p(),h(),s=setInterval(function(){o.innerHTML=c+" mins "+l+" secs",60==++l&&(c++,l=0),60==c&&(hour++,c=0)},1e3),(d=new r(Number.parseInt(u),Number.parseInt(a))).init()}),document.getElementById("stopGameBtn").addEventListener("click",function(){h(),p(),clearInterval(s),l=0,c=0,o.innerHTML=c+" mins "+l+" secs",d.cleanUp()}),void 0===localStorage.top10&&(localStorage.top10=JSON.stringify(m)),m=JSON.parse(localStorage.top10),function(e){let t=document.querySelector(".results");t.innerHTML="";let n=JSON.parse(localStorage.top10);n=n.filter(function(t){return t[3]==e});for(let e=0;e<10;e++){let i=document.createElement("p");0!=n.length&&(i.innerHTML=e+1+".................."+n[e][0]+"................."+n[e][1]+"................."+function(e){switch(e){case 10:return"low";case 18:return"medium";case 24:return"high"}}(n[e][3])+"................."),t.appendChild(i)}}(10),h()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vR2FtZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInJvb3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJHYW1lIiwiW29iamVjdCBPYmplY3RdIiwibnVtYmVyIiwicGljdHVyZSIsInRoaXMiLCJ1cmwiLCJhcnIiLCJjdXJyZW50IiwiY291bnQiLCJwb2ludCIsInNpemUiLCJteW51bWJlciIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImlubmVySFRNTCIsInNwbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwiZ2V0QXR0cmlidXRlIiwic2V0VGltZW91dCIsIndpbiIsInJlbW92ZSIsInBhcmVudE5vZGUiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWwiLCJyZWNvcmQiLCJsb2NhbFN0b3JhZ2UiLCJtaW51dGUiLCJzZWNvbmQiLCJ0b3AxMCIsInB1c2giLCJjdXJyX251bWJlciIsImN1cnJfZGlmZiIsImZpbHRlciIsImEiLCJzb3J0IiwiYiIsInNsaWNlIiwib3RoZXJfZGlmZiIsImNvbmNhdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkcmF3VG9wMTAiLCJjaG9pY2UiLCJidWlsZCIsImhhbmRsZSIsImFwcF9pbnRlcnZhbCIsImFwcF9zZWNvbmQiLCJhcHBfbWludXRlIiwiYXBwX3RpbWVyIiwiYXBwX3BpY3R1cmUiLCJhcHBfbnVtYmVyIiwiYXBwX25ld2dhbWUiLCJhcHBfdG9wMTAiLCJhcHBfdG9nZ2xlR2FtZVdpbmRvdyIsImdldEVsZW1lbnRCeUlkIiwidG9nZ2xlIiwiYXBwX3RvZ2dsZVdlbGNvbWVQYXJ0IiwiYXBwX3Nob3dFcnJvciIsIm1lc3NhZ2UiLCJtZXNzYWdlRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImNvbnRlbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlIiwicHJldmVudERlZmF1bHQiLCJmbGFnIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtZW50IiwiY2hlY2tlZCIsImFwcF92YWxpZGF0ZUdhbWVDb25maWciLCJzZXRJbnRlcnZhbCIsImhvdXIiLCJOdW1iZXIiLCJwYXJzZUludCIsImluaXQiLCJjbGVhblVwIiwicGFyc2UiLCJyZXN1bHRzVG9wMTAiLCJhcnJheVRvcDEwIiwib25lUm93VG9wMTBlbGVtZW50IiwibGVuZ3RoIiwiYXBwX2RyYXdUb3AxMCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEs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QUFRQSxJQUFBLENBQzNCLElBQUFxSCxFQUFBM0YsU0FBQW9FLGNBQUEsS0FDQSxHQUFBc0IsRUFBQUUsU0FDQUQsRUFBQTFFLFVBQUEzQyxFQUFBLHVCQUFBb0gsRUFBQXBILEdBQUEsdUJBQUFvSCxFQUFBcEgsR0FBQSxnQ0FBQThCLEdBQTZLLE9BQUFBLEdBRTdLLFFBQ0EsWUFFQSxRQUNBLGVBRUEsUUFDQSxjQVRBLENBV1VzRixFQUFBcEgsR0FBQSx5QkFDVm1ILEVBQUFqQixZQUFBbUIsSUF0RUFFLENBQUEsSUFHQWhDIiwiZmlsZSI6Ii4vcmVsZWFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWZpZWxkJyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihudW1iZXIsIHBpY3R1cmUpIHtcclxuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcclxuICAgICAgICB0aGlzLnBpY3R1cmUgPSBwaWN0dXJlO1xyXG4gICAgICAgIHRoaXMudXJsID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFyciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50ID0gbnVtYmVyO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IG51bGw7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjaG9pY2UoKSB7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5waWN0dXJlKSB7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVybCA9ICdvbmUtc2tpcnQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVybCA9ICd0d28tc2tpcnQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVybCA9ICd0aHJlZS1za2lydCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFyciA9IFsxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA1LCA1LCA2LCA2LCA3LCA3LCA4LCA4LCA5LCA5LCAxMCwgMTAsIDExLCAxMSwgMTIsIDEyXTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm51bWJlcikge1xyXG5cclxuICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9ICdiaWcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDE4OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSAnc21hbGwnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBidWlsZCgpIHtcclxuICAgICAgICBsZXQgbXludW1iZXIgPSB0aGlzLm51bWJlcjtcclxuICAgICAgICB3aGlsZSAobXludW1iZXIgPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChteW51bWJlciAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgIHJvb3QuaW5uZXJIVE1MICs9IGA8ZGl2IGNsYXNzPVwiY29udGFpbmVyICR7dGhpcy5zaXplfVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiIG51bT0ke3RoaXMuYXJyW3ZhbHVlXX0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZyb250ICR7dGhpcy51cmx9XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhY2tcIj48aW1nIHNyYz1cImltYWdlcy9maXNoJHt0aGlzLmFyclt2YWx1ZV19LnBuZ1wiPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXJyLnNwbGljZSh2YWx1ZSwgMSk7XHJcbiAgICAgICAgICAgIG15bnVtYmVyID0gbXludW1iZXIgLSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaGFuZGxlKCkge1xyXG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgd2hpbGUgKHRhcmdldCAhPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZsaXBwZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gdGhpcy5jb3VudCArIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHRoaXMuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnQuZ2V0QXR0cmlidXRlKCdudW0nKSA9PT0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnbnVtJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5jbGFzc0xpc3QuYWRkKCdoaWRlb3V0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGVvdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50ID0gdGhpcy5wb2ludCAtIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG9pbnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmxpcHBlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmbGlwcGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjbGVhblVwKCkge1xyXG4gICAgICAgIHJvb3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgd2luKCkge1xyXG4gICAgICAgIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSgnd3JhcHBlcicpO1xyXG4gICAgICAgIHJvb3QuaW5uZXJIVE1MID0gYDxoMiBjbGFzcz1cIndpbl90aXRsZVwiPllvdSB3aW4hPC9oMj5gO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgIGxldCBuYW1lID0gbG9jYWxTdG9yYWdlWyduYW1lJ107XHJcbiAgICAgICAgbGV0IHRpbWVzdHIgPSBtaW51dGUgKyBcIjpcIiArIHNlY29uZDtcclxuICAgICAgICBsZXQgc2Vjb25kcyA9IG1pbnV0ZSAqIDYwICsgc2Vjb25kO1xyXG4gICAgICAgIGxldCByZWNvcmQgPSBbbmFtZSwgdGltZXN0ciwgc2Vjb25kcywgdGhpcy5udW1iZXJdO1xyXG4gICAgICAgIHRvcDEwLnB1c2gocmVjb3JkKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJfbnVtYmVyID0gdGhpcy5udW1iZXI7XHJcblxyXG4gICAgICAgIGxldCBjdXJyX2RpZmYgPSB0b3AxMC5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFbM10gPT0gY3Vycl9udW1iZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY3Vycl9kaWZmLnNvcnQoc29ydEJ5VGltZSk7XHJcblxyXG5cclxuICAgICAgICBjdXJyX2RpZmYgPSBjdXJyX2RpZmYuc2xpY2UoMCwgMTApO1xyXG5cclxuICAgICAgICBsZXQgb3RoZXJfZGlmZiA9IHRvcDEwLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYVszXSAhPT0gY3Vycl9udW1iZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdG9wMTAgPSBvdGhlcl9kaWZmLmNvbmNhdChjdXJyX2RpZmYpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZVsndG9wMTAnXSA9IEpTT04uc3RyaW5naWZ5KHRvcDEwKTtcclxuXHJcbiAgICAgICAgZHJhd1RvcDEwKGN1cnJfbnVtYmVyKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc29ydEJ5VGltZShhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhWzJdID4gYlsyXSA/IDEgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaG9pY2UoKTtcclxuICAgICAgICB0aGlzLmJ1aWxkKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGUoKTtcclxuICAgIH1cclxuXHJcbn0iLCJcclxuXHJcblxyXG5pbXBvcnQgR2FtZSwge3Jvb3R9IGZyb20gJy4vR2FtZS5qcyc7XHJcblxyXG5cclxubGV0IHNlY29uZCA9IDAsIG1pbnV0ZSA9IDA7XHJcbmxldCB0aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGltZXJcIik7XHJcbmxldCBpbnRlcnZhbDtcclxuXHJcbmxldCBwaWN0dXJlID0gMDtcclxubGV0IG51bWJlciA9IDA7XHJcblxyXG5sZXQgbmV3Z2FtZSA9IHt9O1xyXG5cclxubGV0IHRvcDEwID0gW107XHJcblxyXG5cclxuXHJcblxyXG4vLy8gYWRkIGV2ZW50IGxpc3RlbmVyc1xyXG5cclxubGV0IGJ0blN0YXJ0R2FtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEdhbWVCdG4nKTtcclxuYnRuU3RhcnRHYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzdGFydEdhbWUpO1xyXG5cclxuXHJcbmxldCBidG5TdG9wR2FtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9wR2FtZUJ0bicpO1xyXG5idG5TdG9wR2FtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RvcEdhbWUpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0R2FtZShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoIXZhbGlkYXRlR2FtZUNvbmZpZygpKSByZXR1cm47XHJcbiAgICB0b2dnbGVXZWxjb21lUGFydCgpO1xyXG4gICAgdG9nZ2xlR2FtZVdpbmRvdygpO1xyXG4gICAgc3RhcnRUaW1lcigpO1xyXG4gICAgbmV3Z2FtZSA9IG5ldyBHYW1lKE51bWJlci5wYXJzZUludChudW1iZXIpLCBOdW1iZXIucGFyc2VJbnQocGljdHVyZSkpO1xyXG4gICAgbmV3Z2FtZS5pbml0KCk7XHJcbn1cclxuXHJcbi8vIHZhbGlkYXRlIGFsbCBpbnB1dCBhbmQgY2hlY2tib3hcclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlR2FtZUNvbmZpZygpIHtcclxuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKCdlbXB0eSBuYW1lJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlWyduYW1lJ10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlO1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdE5hbWUnKS52YWx1ZSA9PSAnJykge1xyXG4gICAgICAgIHNob3dFcnJvcignZW1wdHkgbGFzdCBuYW1lJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlWydsYXN0TmFtZSddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3ROYW1lJykudmFsdWU7XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLnZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKCdlbXB0eSBlbWFpbCcpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxvY2FsU3RvcmFnZVsnZW1haWwnXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLnZhbHVlO1xyXG5cclxuICAgIGxldCBmbGFnID0gMDtcclxuICAgIGxldCByYWRpb0xldmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJhZGlvJyk7XHJcbiAgICByYWRpb0xldmVsLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGZsYWcgPSAxO1xyXG4gICAgICAgICAgICBudW1iZXIgPSBlbGVtZW50LnZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoZmxhZyA9PSAwKSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKCdsZXZlbCBub3Qgc2VsZWN0ZWQnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmbGFnID0gMDtcclxuICAgIGxldCByYWRpb1NoaXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJhZGlvU2hpcnQnKTtcclxuICAgIHJhZGlvU2hpcnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgZmxhZyA9IDE7XHJcbiAgICAgICAgICAgIHBpY3R1cmUgPSBlbGVtZW50LnZhbHVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG4gICAgaWYgKGZsYWcgPT0gMCkge1xyXG4gICAgICAgIHNob3dFcnJvcignc2hpcnQgbm90IHNlbGVjdGVkJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxufVxyXG4vLy8gc3RvcCBnYW1lIGFuZCByZXR1cm4gdG8gd2VsY29tZS1wYXJ0XHJcblxyXG5mdW5jdGlvbiBzdG9wR2FtZSgpIHtcclxuICAgIHRvZ2dsZUdhbWVXaW5kb3coKTtcclxuICAgIHRvZ2dsZVdlbGNvbWVQYXJ0KCk7XHJcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgIHNlY29uZCA9IDA7XHJcbiAgICBtaW51dGUgPSAwO1xyXG4gICAgdGltZXIuaW5uZXJIVE1MID0gbWludXRlICsgXCIgbWlucyBcIiArIHNlY29uZCArIFwiIHNlY3NcIjtcclxuICAgIG5ld2dhbWUuY2xlYW5VcCgpO1xyXG59XHJcblxyXG5pZiAodHlwZW9mIGxvY2FsU3RvcmFnZVsndG9wMTAnXSA9PSBcInVuZGVmaW5lZFwiKSBsb2NhbFN0b3JhZ2VbJ3RvcDEwJ10gPSBKU09OLnN0cmluZ2lmeSh0b3AxMCk7XHJcblxyXG50b3AxMCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlWyd0b3AxMCddKTtcclxuXHJcbmRyYXdUb3AxMCgxMCk7XHJcblxyXG4vL2hpZGUgZ2FtZSB3aW5kb3cgYXQgc3RhcnRcclxudG9nZ2xlR2FtZVdpbmRvdygpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUdhbWVXaW5kb3coKSB7XHJcbiAgICBsZXQgZWxlbUdhbWVXaW5kb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS13aW5kb3cnKTtcclxuICAgIGVsZW1HYW1lV2luZG93LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVdlbGNvbWVQYXJ0KCkge1xyXG4gICAgbGV0IGVsZW1XZWxjb21lUGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZWxjb21lLXBhcnQnKTtcclxuICAgIGVsZW1XZWxjb21lUGFydC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzdGFydFRpbWVyKCkge1xyXG4gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGltZXIuaW5uZXJIVE1MID0gbWludXRlICsgXCIgbWlucyBcIiArIHNlY29uZCArIFwiIHNlY3NcIjtcclxuICAgICAgICBzZWNvbmQrKztcclxuICAgICAgICBpZiAoc2Vjb25kID09IDYwKSB7XHJcbiAgICAgICAgICAgIG1pbnV0ZSsrO1xyXG4gICAgICAgICAgICBzZWNvbmQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWludXRlID09IDYwKSB7XHJcbiAgICAgICAgICAgIGhvdXIrKztcclxuICAgICAgICAgICAgbWludXRlID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9LCAxMDAwKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlKSB7XHJcbiAgICBsZXQgbWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbWVzc2FnZURpdi5jbGFzc05hbWUgPSBcImVycm9yTWVzc2FnZVwiO1xyXG4gICAgbGV0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKTtcclxuICAgIG1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICBsZXQgbWFpbkVsZW1lbnRJZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYgLnJ1bGVzXCIpO1xyXG4gICAgbWFpbkVsZW1lbnRJZC5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1lc3NhZ2VEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZXNzYWdlRGl2KVxyXG4gICAgfSwgMTAwMCk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZHJhd1RvcDEwKG51bWJlcikge1xyXG5cclxuICAgIGxldCByZXN1bHRzVG9wMTAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0cycpO1xyXG4gICAgcmVzdWx0c1RvcDEwLmlubmVySFRNTCA9ICcnO1xyXG4gICAgbGV0IGFycmF5VG9wMTAgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVsndG9wMTAnXSk7XHJcbiAgICBhcnJheVRvcDEwPWFycmF5VG9wMTAuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhWzNdPT1udW1iZXJ9KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICBsZXQgb25lUm93VG9wMTBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIGlmIChhcnJheVRvcDEwLmxlbmd0aCE9MCl7XHJcbiAgICAgICAgb25lUm93VG9wMTBlbGVtZW50LmlubmVySFRNTCA9IGkrMSArICcuJyArICcuLi4uLi4uLi4uLi4uLi4uLicgKyBhcnJheVRvcDEwW2ldWzBdICsgJy4uLi4uLi4uLi4uLi4uLi4uJyArIGFycmF5VG9wMTBbaV1bMV0rICcuLi4uLi4uLi4uLi4uLi4uLicgKyBmdW5jdGlvbiAobnVtYmVyKSB7ICBzd2l0Y2ggKG51bWJlcikge1xyXG5cclxuICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgcmV0dXJuICdsb3cnO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbWVkaXVtJztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZ2gnO1xyXG5cclxuICAgICAgICB9fSAoYXJyYXlUb3AxMFtpXVszXSkrICcuLi4uLi4uLi4uLi4uLi4uLic7fVxyXG4gICAgICAgIHJlc3VsdHNUb3AxMC5hcHBlbmRDaGlsZChvbmVSb3dUb3AxMGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9